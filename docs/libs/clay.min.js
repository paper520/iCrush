/*!
* clay.js - Provide more flexible data visualization solutions!
* https://yelloxing.github.io/clay.js
* 
* author 北京科蓝软件系统股份有限公司
*
* version 2.0.2
* 
* build Mon Dec 24 2018
*
* Copyright CSII
* Released under the Apache-2.0 license
* 
* Date:Tue Oct 22 2019 14:05:39 GMT+0800 (GMT+08:00)
*/

!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e(t):t.clay=t.$$=e(t)}("undefined"!=typeof window?window:this,function(t,s){"use strict";var m=function(t,e){return new m.prototype.init(t,e)};m.prototype.init=function(t,e){this.context=e=e||document;var r,n=o(t,e);for(r=0;r<n.length;r++)this[r]=n[r];return this.selector=t,this.length=n.length,this},m.prototype.extend=m.extend=function(){var t=arguments[0]||{},e=arguments[1]||{},r=arguments.length;for(var n in 1===r&&(e=t,t=this),"object"!=typeof t&&"function"!=typeof t&&(t={}),e)try{t[n]=e[n]}catch(t){throw new Error("Illegal property value！")}return t},m.prototype.init.prototype=m.prototype;var a={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},y={whitespace:"[\\x20\\t\\r\\n\\f]",identifier:"(?:\\\\.|[\\w-]|[^\0-\\xa0])+"},i=["href","title","show","type","role","actuate"];function o(t,e){var r,n=[];if("string"==typeof t){if(t=(t+"").trim().replace(/[\n\f\r]/g,""),/^</.test(t))return[w(t)];if("*"===t)return e.getElementsByTagName("*");var i=y.whitespace,o=y.identifier,a="\\["+i+"{0,}"+o+"(?:"+i+"{0,}="+i+"{0,}(\\'|\\\"){0,1}"+o+"\\1{0,1}){0,1}"+i+"{0,}\\]";if(new RegExp("^(?:"+o+"){0,1}(?:(?:#|\\.)"+o+"|"+a+"){0,}$").test(t)){var u,c=t.match(new RegExp("#"+o,"g")),f=t.match(new RegExp("\\."+o,"g")),s=t.match(new RegExp("^"+o)),h=t.match(new RegExp(a,"g"));if(c){if(1<c.length)return[];u=(u=document.getElementById((c.shift(0)+"").replace(/^#/,"")))?[u]:[]}else u=e.getElementsByClassName&&f?e.getElementsByClassName((f.shift(0)+"").replace(/^\./,"")):s?e.getElementsByTagName(s.shift(0)):e.getElementsByTagName("*");var p,d,l,g,v=new RegExp("^\\["+i+"{0,}("+o+")(?:"+i+"{0,}="+i+"{0,}(?:\\'|\\\"){0,1}("+o+")(?:\\'|\\\"){0,1}){0,1}"+i+"{0,}\\]$");for(r=0;r<u.length;r++)if(g=!0,!(s&&0<s.length&&(s[0]+"").toUpperCase()!==(u[r].tagName+"").toUpperCase())){for(p=" "+u[r].getAttribute("class")+" ",d=0;g&&f&&d<f.length;d++)if(p.search(" "+(f[d]+"").replace(/\./,"")+" ")<0){g=!1;break}for(d=0;g&&h&&d<h.length;d++)if(p=v.exec(h[d]),null===(l=u[r].getAttribute(p[1]))||p[2]&&l!=p[2]){g=!1;break}g&&n.push(u[r])}return n}throw new Error("Unsupported selector!")}if(!t||1!==t.nodeType&&11!==t.nodeType&&9!==t.nodeType){if(!t||t.constructor!==Array&&t.constructor!==HTMLCollection&&t.constructor!==NodeList){if(t&&t.constructor===m)return t;if(t)throw new Error("Unsupported parameter!");return[]}for(r=0;r<t.length;r++)!t[r]||1!==t[r].nodeType&&11!==t[r].nodeType&&9!==t[r].nodeType||n.push(t[r]);return n}return[t]}function w(t){"innerHTML"in SVGElement.prototype==!1&&Object.defineProperty(SVGElement.prototype,"innerHTML",u),"innerHTML"in SVGSVGElement.prototype==!1&&Object.defineProperty(SVGSVGElement.prototype,"innerHTML",u);var e=document.createElementNS(a.svg,"svg");new RegExp("^"+y.identifier+"$").test(t)&&(t="<"+t+"></"+t+">"),e.innerHTML=t;var r,n,i=e.childNodes;for(r=0;r<i.length;r++)if(1===i[r].nodeType||9===i[r].nodeType||11===i[r].nodeType){n=i[r];break}if(!n||"canvas"==n.tagName||/[A-Z]/.test(n.tagName))for((e=document.createElement("div")).innerHTML=t,i=e.childNodes,r=0;r<i.length;r++)if(1===i[r].nodeType||9===i[r].nodeType||11===i[r].nodeType){n=i[r];break}return n}m.prototype.remove=function(){var t;for(t=0;t<this.length;t++)this[t].parentNode.removeChild(this[t]);return this},m.prototype.refresh=function(){var t,e=o(this.selector,this.context),r=this.length;for(t=this.length=0;t<e.length;t++)this[t]=e[t],this.length+=1;for(;t<r;t++)delete this[t];return this},m.prototype.attr=function(t,e){if(null==e||e==s)return 0<this.length?this[0].getAttribute(t):s;var r,n;for(r=0;r<this.length;r++)n="function"==typeof e?e(this[r]._data,r,this.eq(r)):e,/[A-Z]/.test(this[r].tagName)&&0<=i.indexOf(t)?this[r].setAttributeNS(a.xlink,"xlink:"+t,n):this[r].setAttribute(t,n);return this},m.prototype.css=function(t,e){if(arguments.length<=1&&"object"!=typeof t){if(this.length<1)return s;var r=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(this[0],null):this[0].currentStyle;return"string"==typeof t?r.getPropertyValue(t):r}var n,i;if(0<this.length)if("object"==typeof t)for(i in t)for(n=0;n<this.length;n++)this[n].style[i]="function"==typeof e?e(this[n]._data,n,i,t[i]):t[i];else for(n=0;n<this.length;n++)this[n].style[t]="function"==typeof e?e(this[n]._data,n):e;return this},m.prototype.size=function(t){var e,r;return"content"==(t=t||"border")?(r=this[0].clientWidth-(this.css("padding-left")+"").replace("px","")-(this.css("padding-right")+"").replace("px",""),e=this[0].clientHeight-(this.css("padding-top")+"").replace("px","")-(this.css("padding-bottom")+"").replace("px","")):"padding"==t?(r=this[0].clientWidth,e=this[0].clientHeight):"border"==t?(r=this[0].offsetWidth,e=this[0].offsetHeight):"scroll"==t&&(r=this[0].scrollWidth,e=this[0].scrollHeight),{width:r,height:e}},m.prototype.html=function(t){if("innerHTML"in SVGElement.prototype==!1&&Object.defineProperty(SVGElement.prototype,"innerHTML",u),"innerHTML"in SVGSVGElement.prototype==!1&&Object.defineProperty(SVGSVGElement.prototype,"innerHTML",u),"string"==typeof t)for(var e=0;e<this.length;e++)return this[e].innerHTML=t,this;return 0<this.length?this[0].innerHTML:""},m.prototype.find=function(t){if(this.length<=0)return m();var e,r=m(),n=o(t,this[0]);for(r.selector=t,e=0;e<n.length;e++)r[e]=n[e],r.length+=1;return r},m.prototype.eq=function(t){return this.length<=t?new m:new m(this[t])},m.prototype.appendTo=function(t){var e,r,n=m(t);for(e=0;e<n.length;e++)for(r=0;r<this.length;r++)n[e].appendChild(this[r]);return this},m.prototype.append=function(t){var e,r,n=m(t);for(e=0;e<this.length;e++)for(r=0;r<n.length;r++)this[e].appendChild(n[r]);return this},m.prototype.prependTo=function(t){var e,r,n=m(t);for(e=0;e<n.length;e++)for(r=0;r<this.length;r++)n[e].insertBefore(this[r],n[e].childNodes[0]);return this},m.prototype.prepend=function(t){var e,r,n=m(t);for(e=0;e<this.length;e++)for(r=0;r<n.length;r++)this[e].insertBefore(n[r],this[e].childNodes[0]);return this},m.prototype.datum=function(t,e){if(null===t||t===s)return 0<this.length?this[0]._data:s;var r;for(r=0;r<this.length;r++)t="function"==typeof e?e(t,r):t,this[r]._data=t;return this},m.prototype.data=function(t,e){var r,n=[];if(t){if(t.constructor!==Array){var i=[];for(r in t)i.push(t[r]);t=i}var o=m();for(o.selector=this.selector,r=0;r<t.length&&r<this.length;r++)this[r]._data="function"==typeof e?e(t[r],r):t[r],o[r]=this[r],o.length+=1;for(o._enter=[];r<t.length;r++)o._enter.push("function"==typeof e?e(t[r],r):t[r]);for(o._exit=[];r<this.length;r++)o._exit.push(this[r]);return o}for(r=0;r<this.length;r++)n[r]=this[r]._data;return n},m.prototype.enter=function(t){var e,r,n=m();for(n.selector=this.selector,e=0;this._enter&&e<this._enter.length;e++)(r=w(t))._data=this._enter[e],n[e]=r,n.length+=1;return delete this._enter,n},m.prototype.exit=function(){var t,e=m();for(e.selector=this.selector,t=0;this._exit&&t<this._exit.length;t++)e[t]=this._exit[t],e.length+=1;return delete this._exit,e},m.prototype.loop=function(t){var e;for(e=0;e<this.length;e++)t(this[e]._data,e,this.eq(e));return this},m.prototype.bind=function(t,e){var r;if(window.attachEvent)for(r=0;r<this.length;r++)this[r].attachEvent("on"+t,e);else for(r=0;r<this.length;r++)this[r].addEventListener(t,e,!1);return this},m.prototype.trigger=function(t){var e,r;if(document.createEventObject)for(r=document.createEventObject(),e=0;e<this.length;e++)this[e].fireEvent("on"+t,r);else for((r=document.createEvent("HTMLEvents")).initEvent(t,!0,!1),e=0;e<this.length;e++)this[e].dispatchEvent(r);return this},m.prototype.position=function(t){var e=this[0].getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top}};var h=function(){var t=window.navigator.userAgent;return-1<t.indexOf("Opera")||-1<t.indexOf("OPR")?"Opera":-1<t.indexOf("compatible")&&-1<t.indexOf("MSIE")||-1<t.indexOf("Trident")&&-1<t.indexOf("rv:11.0")?"IE":-1<t.indexOf("Edge")?"Edge":-1<t.indexOf("Firefox")?"Firefox":-1<t.indexOf("Chrome")?"Chrome":-1<t.indexOf("Safari")?"Safari":-1};"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),Number.EPSILON===s&&(Number.EPSILON=Math.pow(2,-52)),Number.isInteger===s&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t});var u={get:function(){var t,e=document.createElement("div");for(t=0;t<this.childNodes.length;t++)e.appendChild(this.childNodes[t].cloneNode(!0));return e.innerHTML},set:function(t){var e=document.createElement("div");e.innerHTML=t;var o=function(t){var e,r=document.createElementNS(a.svg,(t.tagName+"").toLowerCase()),n=t.attributes,i=m(r);for(e=0;n&&e<n.length;e++)i.attr(n[e].nodeName,t.getAttribute(n[e].nodeName));return r},r=o(e.firstChild);!function t(e,r){var n=e.firstChild;if(n&&3==n.nodeType)r.textContent=e.innerText;else for(;n;){var i=o(n);r.appendChild(i),n.firstChild&&t(n,i),n=n.nextSibling}}(e.firstChild,r),this.appendChild(r)}},c={timers:[],interval:13,speeds:400,timerId:null};m.animation=function(e,t,r){c.timer(function(t){e(t)},t,r)},c.timer=function(t,e,r){if("function"!=typeof t)throw new Error("tick is required!");(e="number"==typeof e?e:c.speeds)<0&&(e=-e),c.timers.push({createTime:new Date,tick:t,duration:e,callback:r}),c.start()},c.start=function(){c.timerId||(c.timerId=setInterval(c.tick,c.interval))},c.tick=function(){var t,e,r,n,i,o,a,u=c.timers;for(c.timers=[],e=c.timers.length=0;e<u.length;e++)t=(i=u[e]).createTime,r=i.tick,o=i.duration,n=i.callback,!1,1<=(a=(+new Date-t)/o)&&!0,r(a=1<a?1:a),a<1?c.timers.push(i):n&&n();c.timers.length<=0&&c.stop()},c.stop=function(){c.timerId&&(clearInterval(c.timerId),c.timerId=null)},m.color=function(t){var e=m("head").css("color",t).css("color").replace(/^rgba?\(([^)]+)\)$/,"$1").split(new RegExp("\\,"+y.whitespace));return[+e[0],+e[1],+e[2],e[3]==s?1:+e[3]]},m.getColors=function(t){var e=[],r=0;for(r=1;r<=t;r++)e.push("rgb("+(230*Math.random(1)+20).toFixed(0)+","+(230*Math.random(1)+20).toFixed(0)+","+(230*Math.random(1)+20).toFixed(0)+")");return e},m.loop=function(t,e){var r,n=0;for(r in t)e(t[r],r,n++);return m};var f={headers:{},timeout:3e3,context:"",request:function(t){return t},success:function(t,e){"function"==typeof e&&e(t)},error:function(t,e){"function"==typeof e&&e(t)}},p=function(e){var t;e=f.request(e);var r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(/^\//.test(e.url)||(e.url=f.context+""+e.url),r.open(e.type,e.url,!0),r.timeout=e.timeout||f.timeout,"function"==typeof e.fileload){var n=function(t){t.lengthComputable&&e.fileload(t.loaded/t.total)};r.onprogress=n,r.upload.onprogress=n}for(t in r.onload=function(){f.success({response:r.response,status:r.status,header:r.getAllResponseHeaders()},e.success)},r.onerror=function(){f.error({type:"error"},e.error)},r.ontimeout=function(){f.error({type:"timeout"},e.error)},f.headers)r.setRequestHeader(t,f.headers[t]);for(t in e.header)r.setRequestHeader(t,e.header[t]);r.send(e.data)};m.post=function(i,o){var a=function(t,e,r,n){return p({type:"POST",url:t,success:r,error:n,timeout:o,header:i||{},data:e?JSON.stringify(e):""}),a};return a},m.get=function(n,i){var o=function(t,e,r){return p({type:"GET",url:t,success:e,error:r,timeout:i,header:n||{}}),o};return o};var d=function(t,e,r,n){return t.beginPath(),t.fillStyle=e,t.strokeStyle=e,"function"!=typeof r?t:(r(t),n)};function l(t){if(t&&t.constructor===CanvasRenderingContext2D)return t;var e=m(t);return 0<e.length?e[0].getContext("2d"):void 0}m.prototype.region=function(){var i={},t=document.createElement("canvas"),r=[0,0,0],n="r";t.setAttribute("width",this[0].offsetWidth),t.setAttribute("height",this[0].offsetHeight);var o=this,a=t.getContext("2d"),u={drawer:function(t,e){return i[t]==s&&(i[t]={r:function(){return r[0]+=1,n="g","rgb("+r[0]+","+r[1]+","+r[2]+")"},g:function(){return r[1]+=1,n="b","rgb("+r[0]+","+r[1]+","+r[2]+")"},b:function(){return r[2]+=1,n="r","rgb("+r[0]+","+r[1]+","+r[2]+")"}}[n]()),d(a,i[t],e,u)},erase:function(t){return d(a,"rgb(0,0,0)",t,u)},getRegion:function(t){var e,r=o.position(t);r.x-=o.css("border-left-width").replace("px",""),r.y-=o.css("border-top-width").replace("px","");var n=a.getImageData(r.x-.5,r.y-.5,1,1).data;for(e in i)if("rgb("+n[0]+","+n[1]+","+n[2]+")"==i[e])return[e,r.x,r.y];return s}};return u},m.prototype.painter=function(){if(0<this.length&&"CANVAS"!=this[0].nodeName&&"canvas"!=this[0].nodeName)throw new Error("painter is not function");return l(this)},m.prototype.layer=function(){if(0<this.length&&"CANVAS"!=this[0].nodeName&&"canvas"!=this[0].nodeName)throw new Error("layer is not function");var e=l(this),r=[],n={},i=this[0].clientWidth,o=this[0].clientHeight;this[0].style.width=i+"px",this[0].style.height=o+"px",this[0].setAttribute("width",2*i),this[0].setAttribute("height",2*o);var a={painter:function(t){return n[t]&&n[t].constructor===CanvasRenderingContext2D||(r.push(document.createElement("canvas")),r[r.length-1].setAttribute("width",2*i),r[r.length-1].setAttribute("height",2*o),r[r.length-1].style.width=i+"px",r[r.length-1].style.height=o+"px",n[t]=r[r.length-1].getContext("2d"),n[t].scale(2,2)),n[t]},clean:function(t){return t&&(t.constructor!==CanvasRenderingContext2D&&(t=a.painter(t)),t.clearRect(0,0,i,o)),a},update:function(){if(e&&e.constructor===CanvasRenderingContext2D){var t;for(e.clearRect(0,0,2*i,2*o),e.save(),t=0;t<r.length;t++)e.drawImage(r[t],0,0,2*i,2*o,0,0,2*i,2*o);e.restore()}return a}};return a};var g=function(t,e){var r,n,i=[];for(r=0;r<4;r++)for(n=0;n<e.length/4;n++)i[4*n+r]=t[r]*e[4*n]+t[r+4]*e[4*n+1]+t[r+8]*e[4*n+2]+t[r+12]*e[4*n+3];return i},v=function(t){if(9==t.length)return t[0]*t[4]*t[8]-t[0]*t[7]*t[5]-t[3]*t[1]*t[8]+t[3]*t[7]*t[2]+t[6]*t[1]*t[5]-t[6]*t[4]*t[2];if(16==t.length)return t[0]*v([t[5],t[6],t[7],t[9],t[10],t[11],t[13],t[14],t[15]])-t[4]*v([t[1],t[2],t[3],t[9],t[10],t[11],t[13],t[14],t[15]])+t[8]*v([t[1],t[2],t[3],t[5],t[6],t[7],t[13],t[14],t[15]])-t[12]*v([t[1],t[2],t[3],t[5],t[6],t[7],t[9],t[10],t[11]]);throw new Error("Unsupported parameter!")},x=function(t){var e,r=[v([(e=t)[5],e[6],e[7],e[9],e[10],e[11],e[13],e[14],e[15]]),-v([e[4],e[6],e[7],e[8],e[10],e[11],e[12],e[14],e[15]]),v([e[4],e[5],e[7],e[8],e[8],e[11],e[12],e[13],e[15]]),-v([e[4],e[5],e[6],e[8],e[9],e[10],e[12],e[13],e[14]]),-v([e[1],e[2],e[3],e[9],e[10],e[11],e[13],e[14],e[15]]),v([e[0],e[2],e[3],e[8],e[10],e[11],e[12],e[14],e[15]]),-v([e[0],e[1],e[3],e[8],e[9],e[11],e[12],e[13],e[15]]),v([e[0],e[1],e[2],e[8],e[9],e[10],e[12],e[13],e[14]]),v([e[1],e[2],e[3],e[5],e[6],e[7],e[13],e[14],e[15]]),-v([e[0],e[2],e[3],e[4],e[6],e[7],e[12],e[14],e[15]]),v([e[0],e[1],e[3],e[4],e[5],e[7],e[12],e[13],e[15]]),-v([e[0],e[1],e[2],e[4],e[5],e[6],e[12],e[13],e[14]]),-v([e[1],e[2],e[3],e[5],e[6],e[7],e[9],e[10],e[11]]),v([e[0],e[2],e[3],e[4],e[6],e[7],e[8],e[10],e[11]]),-v([e[0],e[1],e[3],e[4],e[5],e[7],e[8],e[9],e[11]]),v([e[0],e[1],e[2],e[4],e[5],e[6],e[8],e[9],e[10]])];return[r[0],r[4],r[8],r[12],r[1],r[5],r[9],r[13],r[2],r[6],r[10],r[14],r[3],r[7],r[11],r[15]]};m.Matrix4=function(t){var p=t||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],d={move:function(t,e,r,n){return p=g(function(t,e,r,n){n=n||0;var i=Math.sqrt(e*e+r*r+n*n);return[1,0,0,0,0,1,0,0,0,0,1,0,e*t/i,r*t/i,n*t/i,1]}(t,e,r,n),p),d},rotate:function(t,e,r,n,i,o,a){var u,c,f,s=function(t,e,r,n,i,o){if("number"!=typeof t||"number"!=typeof e)throw new Error("a1 and b1 is required!");if("number"!=typeof r?(r=0,n=t,i=e,o=1):"number"==typeof n&&"number"==typeof i&&"number"==typeof o||(n=t,i=e,o=r,r=e=t=0),t==n&&e==i&&r==o)throw new Error("It's not a legitimate ray!");var a=Math.sqrt((n-t)*(n-t)+(i-e)*(i-e)),u=0!=a?(i-e)/a:1,c=0!=a?(n-t)/a:0,f=(n-t)*c+(i-e)*u,s=o-r,h=Math.sqrt(f*f+s*s),p=0!=h?s/h:1,d=0!=h?f/h:0;return[[u,p*c,c*d,0,-c,u*p,u*d,0,0,-d,p,0,e*c-t*u,r*d-t*c*p-e*u*p,-t*c*d-e*u*d-r*p,1],[u,-c,0,0,p*c,p*u,-d,0,c*d,u*d,p,0,t,e,r,1]]}(e,r,n,i,o,a);return p=g(g(g(s[1],(u=t,c=Math.sin(u),[f=Math.cos(u),c,0,0,-c,f,0,0,0,0,1,0,0,0,0,1])),s[0]),p),d},scale:function(t,e,r,n,i,o){var a,u,c,f,s,h;return p=g([a=t,0,0,0,0,u=e,0,0,0,0,c=r,0,(f=(f=n)||0)-f*a,(s=(s=i)||0)-s*u,(h=(h=o)||0)-h*c,1],p),d},multiply:function(t,e){return p=e?g(p,t):g(t,p),d},inverse:function(){return p=function(t){var e,r=x(t),n=v(t),i=[];if(0==n)throw new Error("This matrix is irreversible!");for(e=0;e<16;e++)i[e]=r[e]/n;return i}(p),d},use:function(t,e,r,n){var i=g(p,[t,e,r=r||0,n=n||1]);return i[0]=i[0].toFixed(7),i[1]=i[1].toFixed(7),i[2]=i[2].toFixed(7),i},value:function(){return p}};return d},m.hermite=function(){var c={u:.5},f=function(t){if(c.MR){var e=(t-c.a)/(c.b-c.a),r=e*e;return(e*r*c.MR[0]+r*c.MR[1]+e*c.MR[2]+c.MR[3])*(c.b-c.a)}throw new Error("You shoud first set the position!")};return f.setU=function(t){if("number"!=typeof t)throw new Error("Expecting a figure!");return c.u=.5*(1-t),f},f.setP=function(t,e,r,n,i,o){if(!(t<r))throw new Error("The point position should be increamented!");c.a=t,c.b=r;var a=c.u*i,u=c.u*o;return e/=r-t,n/=r-t,c.MR=[2*e-2*n+a+u,3*n-3*e-2*a-u,a,e],f},f},m.cardinal=function(){var e,i={t:0},o=function(t){if(i.hs){for(e=-1;e+1<i.hs.x.length&&(t>i.hs.x[e+1]||-1==e&&t>=i.hs.x[e+1]);)e+=1;if(-1==e||e>=i.hs.h.length)throw new Error("Coordinate crossing!");return i.hs.h[e](t)}throw new Error("You shoud first set the position!")};return o.setU=function(t){if("number"!=typeof t)throw new Error("Expecting a figure!");return i.t=t,o},o.setP=function(t){i.hs={x:[],h:[]};var e,r,n=(t[1][1]-t[0][1])/(t[1][0]-t[0][0]);for(i.hs.x[0]=t[0][0],e=1;e<t.length;e++){if(t[e][0]<=t[e-1][0])throw new Error("The point position should be increamented!");i.hs.x[e]=t[e][0],r=e<t.length-1?(t[e+1][1]-t[e-1][1])/(t[e+1][0]-t[e-1][0]):(t[e][1]-t[e-1][1])/(t[e][0]-t[e-1][0]),i.hs.h[e-1]=m.hermite().setU(i.t).setP(t[e-1][0],t[e-1][1],t[e][0],t[e][1],n,r),n=r}return o},o},m.catmullRom=function(){var i={},o=function(t){var e=t*t,r=e*t;return[.5*(i.x[0]*r+i.x[1]*e+i.x[2]*t+i.x[3]),.5*(i.y[0]*r+i.y[1]*e+i.y[2]*t+i.y[3])]};return o.setP=function(t,e,r,n){return i.x=m.Matrix4([-1,2,-1,0,3,-5,0,2,-3,4,1,0,1,-1,0,0]).use(t[0],e[0],r[0],n[0]),i.y=m.Matrix4([-1,2,-1,0,3,-5,0,2,-3,4,1,0,1,-1,0,0]).use(t[1],e[1],r[1],n[1]),o},o};var b=function(t,e,r,n){var i=Math.cos(t),o=Math.sin(t);return[e*i-r*o,e*o+r*i,n]};m.map=function(){var l,g={c:[107,36],s:1},r=function(t,e){var r,n,i,o,a,u,c,f,s,h,p,d;return r=(360-e)/180*Math.PI,n=100*g.s,o=i=0,a=Math.cos(r),u=Math.sin(r),l=[o*u+n*a,i,o*a-n*u],l=b(t/180*Math.PI,l[0],l[1],l[2]),l=b((90-g.c[0])/180*Math.PI,l[0],l[1],l[2]),c=(90-g.c[1])/180*Math.PI,f=l[0],s=l[1],h=l[2],p=Math.cos(c),d=Math.sin(c),[-(l=[f,s*p-h*d,s*d+h*p])[0],l[1],l[2]]};return r.scale=function(t){return"number"==typeof t&&(g.s=t),r},r.center=function(t,e){return"number"==typeof t&&"number"==typeof e&&(g.c=[t,e]),r},r},m.rotate=function(t,e,r,n,i){var o=Math.cos(r),a=Math.sin(r);return[+((n-t)*o-(i-e)*a+t).toFixed(7),+((n-t)*a+(i-e)*o+e).toFixed(7)]},m.move=function(t,e,r,n,i){var o=Math.sqrt(t*t+e*e);return[+(t*r/o+n).toFixed(7),+(e*r/o+i).toFixed(7)]},m.scale=function(t,e,r,n,i){return[+(r*(n-t)+t).toFixed(7),+(r*(i-e)+e).toFixed(7)]},m.arcCalc=function(){var n={},r={setDeg:function(t,e){return n.d=[t,e],r},setRadius:function(t,e){return n.r=[t,e],r},setCenter:function(t,e){return n.c=[t,e],r},getCentroid:function(){return m.rotate(n.c[0],n.c[1],n.d[0]+.5*n.d[1],n.c[0]+.5*(n.r[0]+n.r[1]),n.c[1])},getLines:function(t,e){var r={point1:m.rotate(n.c[0],n.c[1],n.d[0]+.5*n.d[1],n.c[0]+n.r[1],n.c[1]),point2:m.rotate(n.c[0],n.c[1],n.d[0]+.5*n.d[1],n.c[0]+n.r[1]+t,n.c[1])};return r.point3=[(+r.point2[0]-(-r.point2[0]>n.c[0]?1:-1)*e).toFixed(7),(+r.point2[1]).toFixed(7)],r}};return r},m.treeCalc=function(s){return function(t,e){var r,n,i,o,a,u={size:e,deep:0,node:{}};for(i in t)(o=t[i]).left- -.5>u.deep&&(u.deep=o.left- -.5),u.node[i]=o;if("circle"==s.type)for(i in r=s.radius/(u.deep-1),n=2*Math.PI/(u.size- -.5),u.node)o=u.node[i],a=m.rotate(s.cx,s.cy,Math.PI/4- -n*o.top,s.cx- -r*(o.left-.5),s.cy),u.node[i].left=+a[0],u.node[i].top=+a[1];else if("LR"==s.type||"RL"==s.type)for(i in r=s.width/u.deep,"RL"==s.type&&(r*=-1),n=s.height/(u.size- -.5),u.node)o=u.node[i],u.node[i].left=+(("RL"==s.type?s.width:0)- -o.left*r).toFixed(7),u.node[i].top=+(o.top*n).toFixed(7);else{if("TB"!=s.type&&"BT"!=s.type)throw new Error("Tree type is necessary!");var c,f;for(i in r=s.height/u.deep,"BT"==s.type&&(r*=-1),n=s.width/(u.size- -.5),u.node)c=(o=u.node[i]).left,f=o.top,u.node[i].top=+(("BT"==s.type?s.height:0)- -c*r).toFixed(7),u.node[i].left=+(f*n).toFixed(7)}return u.node}};var E=function(t,e,r){var n=t.createShader(e);if(null==n)throw new Error("Unable to create shader!");if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error("Failed to compile shader:"+t.getShaderInfoLog(n));return n};m.prototype.webgl=function(t){var v=function(t,e){var r,n=["webgl","experimental-webgl","webkit-3d","moz-webgl"],i=null;for(r=0;r<n.length;r++){try{i=t.getContext(n[r],e)}catch(t){}if(i)break}return i}(this[0],t),u={painter:function(){return v},shader:function(t,e){return v.program=function(t,e,r){var n=E(t,t.VERTEX_SHADER,e),i=E(t,t.FRAGMENT_SHADER,r),o=t.createProgram();if(t.attachShader(o,n),t.attachShader(o,i),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw new Error("Failed to link program: "+t.getProgramInfoLog(o));return t.useProgram(o),o}(v,t,e),u},buffer:function(a){var l,t,e,r,n,i=(e=a,r=(t=v).createBuffer(),n=e?t.ELEMENT_ARRAY_BUFFER:t.ARRAY_BUFFER,t.bindBuffer(n,r),r),g={write:function(t,e){var r,n,i,o;return e=e||v.STATIC_DRAW,r=v,n=t,i=e,o=a?r.ELEMENT_ARRAY_BUFFER:r.ARRAY_BUFFER,r.bufferData(o,n,i),l=t,g},use:function(t,e,r,n,i,o){var a,u,c,f,s,h,p,d=l.BYTES_PER_ELEMENT;return"string"==typeof t&&(t=v.getAttribLocation(v.program,t)),r=r||0,n=n||0,i=i||v.FLOAT,u=t,c=e,f=i,s=r*d,h=n*d,p=o,(a=v).vertexAttribPointer(u,c,f,p||!1,s||0,h||0),a.enableVertexAttribArray(u),g},close:function(){var t;return t=i,v.deleteBuffer(t),u}};return g},texture:function(t,f){f=f||v.TEXTURE_2D;var e,r,n,i,o=(r=t,n=f,i=(e=v).createTexture(),e.activeTexture(e["TEXTURE"+r]),e.bindTexture(n,i),i),s={config:function(t){return function(t,e,r){var n;for(n in r)t.texParameteri(e,t[n],t[r[n]])}(v,f,t),s},use:function(t,e,r,n){var i,o,a,u,c;return i=f,o=t,a=e,u=r,c=n,v.texImage2D(i,o,a,a,u,c),s},close:function(){var t;return t=o,v.deleteTexture(t),u}};return s}};return u},m.scaleLinear=function(){var e={},r=function(t){if("number"!=typeof t||t<e.d[0]||t>e.d[1])throw new Error("Unsupported parameter!");return(e.r[1]-e.r[0])*(t-e.d[0])/(e.d[1]-e.d[0])+e.r[0]};return r.domain=function(t){return e.d=t,r},r.range=function(t){return e.r=t,r},r.invert=function(t){if("number"!=typeof t||t<e.r[0]||t>e.r[1])throw new Error("Unsupported parameter!");return(e.d[1]-e.d[0])*(t-e.r[0])/(e.r[1]-e.r[0])+e.d[0]},r},m.scaleOrdinal=function(){var o={},e=function(t){if(!1===Array.isArray(o.d)||!1===Array.isArray(o.r))throw new Error("domain or range expect Array!");for(var e=Math.ceil(o.d.length/o.r.length),r=[],n=0;n<e;n++)r.push.apply(r,o.r);var i={};return o.d.forEach(function(t,e){i[t]=r[e]}),i[t]};return e.domain=function(t){return o.d=t,e},e.range=function(t){return o.r=t,e},e.invert=function(t){if(!1===Array.isArray(o.d)||!1===Array.isArray(o.r))throw new Error("domain or range expect Array!");for(var e=Math.ceil(o.d.length/o.r.length),r=[],n=0;n<e;n++)r.push.apply(r,o.r);var i={};return o.d.forEach(function(t,e){i[r[e]]?i[r[e]].push(t):i[r[e]]=[t]}),i[t]},e},m.scaleQuantize=function(){var o={},e=function(t){if(!1===Array.isArray(o.d)||!1===Array.isArray(o.r))throw new Error("domain or range expect Array!");if(2!==o.d.length)throw new Error("domain length expect 2");var e,n=(o.d[1]-o.d[0])/o.r.length,i=[];if(o.r.forEach(function(t,e){var r={};r.start=o.d[0]+n*e,r.end=o.d[0]+n*(e+1),r.value=t,i.push(r)}),t<o.d[0]||t>o.d[1])e=s;else for(var r=0;r<i.length;r++)if(t>=i[r].start&&t<i[r].end){e=i[r].value;break}return e};return e.domain=function(t){return o.d=t,e},e.range=function(t){return o.r=t,e},e.invert=function(t){if(!1===Array.isArray(o.d)||!1===Array.isArray(o.r))throw new Error("domain or range expect Array!");if(2!==o.d.length)throw new Error("domain length expect 2");var e,n=(o.d[1]-o.d[0])/o.r.length,i=[];o.r.forEach(function(t,e){var r={};r.start=o.d[0]+n*e,r.end=o.d[0]+n*(e+1),r.value=t,i.push(r)});for(var r=0;r<i.length;r++)t===i[r].value&&(e=[i[r].start,i[r].end]);return e},e},m.scaleBand=function(){var o={po:10,pi:5},a=function(t){if(!1===Array.isArray(o.d)||!1===Array.isArray(o.r))throw new Error("domain or range expect Array!");a.bandWidth();var n={};return o.d.forEach(function(t,e){var r=o.r[0]+o.po+(o.bw+o.pi)*e;n[t]=[r,r+o.bw]}),n[t]};return a.domain=function(t){return o.d=t,a},a.range=function(t){return o.r=t,a},a.paddingOuter=function(t){if(0===arguments.length)return o.po;if("number"!=typeof t)throw new Error("expect number!");return o.po=t,a},a.paddingInner=function(t){if(0===arguments.length)return o.pi;if("number"!=typeof t)throw new Error("expect number!");return o.pi=t,a},a.padding=function(t,e){if(0===arguments.length)return[o.po,o.pi];if("number"!=typeof t||"number"!=typeof e)throw new Error("expect number!");return o.po=t,o.pi=e,a},a.invert=function(t){if(!1===Array.isArray(o.d)||!1===Array.isArray(o.r))throw new Error("domain or range expect Array!");a.bandWidth();var e,i=[];o.d.forEach(function(t,e){var r=o.r[0]+o.po+(o.bw+o.pi)*e,n=[r,r+o.bw];n.value=t,i.push(n)});for(var r=0;r<i.length;r++)if(t>=i[r][0]&&t<i[r][1]){e=i[r].value;break}return e},a.bandWidth=function(){var t=o.r[1]-o.r[0];return o.bw=(t-2*o.po-o.pi*(o.d.length-1))/o.d.length,o.bw},a},m.scaleTime=function(){var i={pt:"YYYY-MM-DD hh:mm:ss",ft:"YYYY-MM-DD hh:mm:ss"},n=function(t){if(!1===Array.isArray(i.d)||!1===Array.isArray(i.r))throw new Error("domain or range expect Array!");if(2!==i.d.length||2!==i.r.length)throw new Error("domain,range length expect 2");var e=n._parse(i.d[1]).getTime()-n._parse(i.d[0]).getTime(),r=i.r[1]-i.r[0];return(n._parse(t).getTime()-n._parse(i.d[0]).getTime())/e*r+i.r[0]};return n.domain=function(t){return i.d=t,n},n.range=function(t){return i.r=t,n},n.parse=function(t){return 0===arguments.length?i.pt:(i.pt=t,n)},n.format=function(t){return 0===arguments.length?i.ft:(i.ft=t,n)},n.invert=function(t){if(!1===Array.isArray(i.d)||!1===Array.isArray(i.r))throw new Error("domain or range expect Array!");if(2!==i.d.length||2!==i.r.length)throw new Error("domain length expect 2");var e=n._parse(i.d[1]).getTime()-n._parse(i.d[0]).getTime(),r=t/(i.r[1]-i.r[0])*e;return n._format(new Date(r+n._parse(i.d[0]).getTime()))},n._parse=function(r){var n={YYYY:2019,MM:1,DD:1,hh:0,mm:0,ss:0};return Object.keys(n).forEach(function(t){var e=i.pt.indexOf(t);-1!==e&&(n[t]=r.slice(e,e+t.length))}),new Date(n.YYYY,n.MM-1,n.DD,n.hh,n.mm,n.ss)},n._format=function(t){var e={YYYY:2019,MM:1,DD:1,hh:0,mm:0,ss:0},r=function(t){return t<10?"0"+t:t};e.YYYY=t.getFullYear(),e.MM=r(t.getMonth()+1),e.DD=r(t.getDate()),e.hh=r(t.getHours()),e.mm=r(t.getMinutes()),e.ss=r(t.getSeconds());var n=i.ft.slice(0);return Object.keys(e).forEach(function(t){n=n.replace(t,e[t])}),n},n},m.svg={},m.canvas={};var n=function(t,e,r,n){var i,o=r(n);if(o._p=l(t),e)for(i in e)o._p[i]=e[i];return o.painter=function(t){return o._p=l(t),o},o.config=function(t){for(i in t)o._p[i]=t[i];return o},o},r=function(a){var u={c:[0,0],r:[100,140],t:[]},r=function(t,e,r,n){e>2*Math.PI&&(e=2*Math.PI),e<2*-Math.PI&&(e=2*-Math.PI),e<0&&(t+=e,e*=-1),"number"!=typeof r&&(r=u.r[0]),"number"!=typeof n&&(n=u.r[1]);var i,o=[];return i=b(t,r,0,0),o[0]=i[0],o[1]=i[1],i=b(e,i[0],i[1],0),o[2]=i[0],o[3]=i[1],i=b(t,n,0,0),o[4]=i[0],o[5]=i[1],i=b(e,i[0],i[1],0),o[6]=i[0],o[7]=i[1],a(u.c[0],u.c[1],r,n,t,t+e,o[0]+u.c[0],o[1]+u.c[1],o[4]+u.c[0],o[5]+u.c[1],o[2]+u.c[0],o[3]+u.c[1],o[6]+u.c[0],o[7]+u.c[1],u.t,.5*(n-r))};return r.setRadius=function(t,e){return u.r=[t,e],r},r.setCenter=function(t,e){return u.c=[t,e],r},r.lineCap=function(t,e){return u.t=[t,e],r},r};m.svg.arc=function(){return r(function(t,e,r,n,i,o,a,u,c,f,s,h,p,d,l,g){var v=o-i>Math.PI?1:0,m="M"+a+" "+u;return g<0&&(g=-g),m+="A"+r+" "+r+" 0 "+v+" 1 "+s+" "+h,l[1]?m+="A"+g+" "+g+"  0 1 0 "+p+" "+d:m+="L"+p+" "+d,m+="A"+n+" "+n+" 0 "+v+" 0 "+c+" "+f,l[0]?m+="A"+g+" "+g+"  0 1 0 "+a+" "+u:m+="L"+a+" "+u,m})},m.canvas.arc=function(t,e){var v=n(t,e,r,function(t,e,r,n,i,o,a,u,c,f,s,h,p,d,l,g){return g<0&&(g=-g),v._p.beginPath(),v._p.moveTo(a,u),v._p.arc(t,e,r,i,o,!1),l[1]?v._p.arc(.5*(s+p),.5*(h+d),g,o-Math.PI,o,!0):v._p.lineTo(p,d),v._p.arc(t,e,n,o,i,!0),l[0]?v._p.arc(.5*(a+c),.5*(u+f),g,i,i-Math.PI,!0):v._p.lineTo(a,u),v._p});return v};var T=function(u){var c={s:10,t:["LR"]},n=function(t,e,r,n){var i,o=.5*c.s,a=c.t[0];switch("RL"!=c.t[0]&&"BT"!=c.t[0]||(r=-r,a={RL:"LR",BT:"TB"}[c.t[0]]),a){case"LR":i=[[t,e-o],[t+r,e-o],[t+r,e+o],[t,e+o]];break;case"TB":i=[[t+o,e],[t+o,e+r],[t-o,e+r],[t-o,e]];break;default:n=n||0,i=[m.rotate(c.t[1],c.t[2],n+c.t[0],t,e-o),m.rotate(c.t[1],c.t[2],n+c.t[0],t+r,e-o),m.rotate(c.t[1],c.t[2],n+c.t[0],t+r,e+o),m.rotate(c.t[1],c.t[2],n+c.t[0],t,e+o)]}return u(i)};return n.setSize=function(t){return c.s=t,n},n.setType=function(t,e,r){return c.t=[t,e,r],n},n};m.svg.rect=function(){return T(function(t){return"M"+t[0][0]+","+t[0][1]+" L"+t[1][0]+","+t[1][1]+" L"+t[2][0]+","+t[2][1]+" L"+t[3][0]+","+t[3][1]+" L"+t[0][0]+","+t[0][1]+" "})},m.canvas.rect=function(t,e){var r=n(t,e,T,function(t){return r._p.beginPath(),r._p.moveTo(t[0][0],t[0][1]),r._p.lineTo(t[1][0],t[1][1]),r._p.lineTo(t[2][0],t[2][1]),r._p.lineTo(t[3][0],t[3][1]),r._p.lineTo(t[0][0],t[0][1]),r._p});return r};var _=function(o){var a={d:5},u=m.hermite().setU(-1),e=function(t){for(var e,r,n=0,i="M"+t[0][0]+","+t[0][1];n<t.length-1;n++)e=0==n?0:n-1,r=n==t.length-2?t.length-1:n+2,u.setP(t[n][0],t[n][1],t[n+1][0],t[n+1][1],(t[n+1][1]-t[e][1])/(t[n+1][0]-t[e][0]),(t[r][1]-t[n][1])/(t[r][0]-t[n][0])),i=o(u,t[n][0],t[n+1][0],i,a.d);return i};return e.setPrecision=function(t){return a.d=t,e},e.setU=function(t){return u.setU(t),e},e};m.svg.line=function(){return _(function(t,e,r,n,i){for(;e<r;e+=i)n=n+" L"+e+","+t(e);return n=n+" L"+r+","+t(r)})},m.canvas.line=function(t,e){var o=n(t,e,_,function(t,e,r,n,i){for("string"==typeof n&&(o._p.beginPath(),o._p.moveTo(e,t(e)));e<r;e+=i)o._p.lineTo(e,t(e));return o._p.lineTo(r,t(r)),o._p});return o};var M=function(i){var o={p:[]},r=function(t,e,r,n){return i(t,e,r,n,o.p[0],o.p[1],o.c||"#000",o.s||16)};return r.setAlign=function(t,e){return o.p=[t,e],r},r.setSize=function(t){return o.s=t,r},r.setColor=function(t){return o.c=t,r},r};m.svg.text=function(){return M(function(t,e,r,n,i,o,a,u){var c=h();"IE"!=c&&"Edge"!=c||("top"==o&&(e+=u),"middle"==o&&(e+=.5*u));var f=n?"transform='rotate("+180*n/Math.PI+","+t+","+e+")'":"";return m("<text fill="+a+' x="'+t+'" y="'+e+'" '+f+">"+r+"</text>").css({"text-anchor":{left:"start",right:"end"}[i]||"middle","dominant-baseline":{top:"text-before-edge",bottom:{Safari:"auto"}[c]||"ideographic"}[o]||{Firefox:"middle"}[c]||"central","font-size":u+"px","font-family":"sans-serif"})})},m.canvas.text=function(t,e){var c=n(t,e,M,function(t,e,r,n,i,o,a,u){return c._p.save(),c._p.beginPath(),c._p.textAlign={left:"start",right:"end"}[i]||"center",c._p.textBaseline={top:"top",bottom:"bottom"}[o]||"middle",c._p.font=u+"px sans-serif",c._p.translate(t,e),c._p.rotate(n),c._p.fillStyle=a,c._p.fillText(r,0,0),c._p.restore(),c._p});return c};var A=function(a){var u={},n=function(t,e,r,n){var i,o;if("normal"==u.t[2])i=[u.t[0],u.t[1]],o=[-u.t[0],-u.t[1]];else{if("circle"!=u.t[2])throw new Error("Illegal type!");i=[t-u.t[0],e-u.t[1]],i=(u.t[0]-t)*(u.t[0]-t)+(u.t[1]-e)*(u.t[1]-e)==(u.t[0]-r)*(u.t[0]-r)+(u.t[1]-n)*(u.t[1]-n)?[u.t[0]-t,u.t[1]-e]:[t-u.t[0],e-u.t[1]],o=[u.t[0]-r,u.t[1]-n]}return a([t,e],[r,n],m.move(i[0],i[1],u.l,t,e),m.move(o[0],o[1],u.l,r,n))};return n.setType=function(t,e,r){return r||(r="normal"),u.t=[t,e,r],n},n.setL=function(t){return u.l=t,n},n};m.svg.bezier=function(){return A(function(t,e,r,n){return"M"+t[0]+","+t[1]+" C"+r[0]+","+r[1]+" "+n[0]+","+n[1]+" "+e[0]+","+e[1]})},m.canvas.bezier=function(t,e){var i=n(t,e,A,function(t,e,r,n){return i._p.beginPath(),i._p.moveTo(t[0],t[1]),i._p.bezierCurveTo(r[0],r[1],n[0],n[1],e[0],e[1]),i._p});return i};var R=function(o){var a={d:100};if(!a.i)var u=m.catmullRom();var e=function(t){var e=1===t.length?[t[0]]:Array.apply(null,t);e.push(e[0]);var r=e.length;e.unshift(e[r-2]),e.push(e[2]);for(var n=1,i="M"+e[1][0]+" "+e[1][1]+" ";n<r;n++)i=a.i?o([e[n],e[n+1]],0,1/a.d,i):(u.setP(e[n-1],e[n],e[n+1],e[n+2]),o(u,0,1/a.d,i));return"string"==typeof i?i+=" Z":i.closePath(),i};return e.setNum=function(t){return a.d=t,e},e.noInterpolate=function(t){return a.i=t,e},e};m.svg.polygon=function(){return R(function(t,e,r,n){if("function"!=typeof t)n=n+" L"+t[1][0]+","+t[1][1];else for(;e<=1;e+=r){var i=t(e);n=n+" L"+i[0]+","+i[1]}return n})},m.canvas.polygon=function(t,e){var o=n(t,e,R,function(t,e,r,n){if("function"!=typeof t)"string"==typeof n&&(o._p.beginPath(),o._p.moveTo(t[0][0],t[0][1])),o._p.lineTo(t[1][0],t[1][1]);else{var i=t(e);for("string"==typeof n&&o._p.moveTo(i[0],i[1]);e<=1;e+=r)i=t(e),o._p.lineTo(i[0],i[1])}return o._p});return o},m.treeLayout=function(){var u,r,c={e:{}},o=function(){var o=[],a=0;!function t(e,r){var n;for(n=0;n<e.children.length;n++)t(u[e.children[n]],r+1);(u[e.id].left=r+.5,0==n)?(o[r]==s&&(o[r]=-.5),o[r-1]==s&&(o[r-1]=-.5),u[e.id].top=o[r]+1,o[r]+1+.5*(u[e.pid].children.length-1)-1<o[r-1]&&(u[e.id].top=o[r-1]+1-.5*(u[e.pid].children.length-1))):u[e.id].top=.5*(u[e.children[0]].top+u[e.children[n-1]].top);if(u[e.id].top<=o[r]){var i=o[r]+1-u[e.id].top;!function t(e,r){var n;for(u[e].top+=i,o[r]<u[e].top&&(o[r]=u[e].top),n=0;n<u[e].children.length;n++)t(u[e].children[n],r+1)}(e.id,r)}o[r]=u[e.id].top,u[e.id].top+.5>a&&(a=u[e.id].top+.5)}(u[r],0),c.e.drawer(u,r,a)},a=function(o){var a,t,u={},e=c.e.root(o);return a=t=c.e.id(e),u[a]={data:e,pid:null,id:a,children:[],show:!0},function t(e,r){var n,i=c.e.child(e,o);for(n=0;i&&n<i.length;n++)a=c.e.id(i[n]),u[r].children.push(a),u[a]={data:i[n],pid:r,id:a,children:[],show:!0},t(i[n],a)}(e,a),[t,u]},f=function(t){var e=a(t);return u=e[1],r=e[0],o(),f};return f.root=function(t){return c.e.root=t,f},f.child=function(t){return c.e.child=t,f},f.id=function(t){return c.e.id=t,f},f.drawer=function(t){return c.e.drawer=t,f},f.add=function(t,e,r){var n,i=a(e);for(n in i[1][i[0]].pid=t,u[t].children.push(i[0]),i[1])u[n]=i[1][n];return r||o(),f},f.delete=function(t,e){var r=u[u[t].pid].children.indexOf(t);return-1<r&&u[u[t].pid].children.splice(r,1),function t(e){var r;for(r=0;r<u[e].children.length;r++)t(u[u[e].children[r]].id);delete u[e]}(t),e||o(),f},f.toggle=function(t,e,r){var n=u[u[t].pid].children.indexOf(t);return-1<n&&"show"!=r?(u[u[t].pid].children.splice(n,1),u[t]._index=n):"hidden"!=r&&u[u[t].pid].children.splice(u[t]._index,0,t),e||o(),f},f.update=function(){return o(),f},f},m.pieLayout=function(){var u={c:[0,0],r:1,l:[20,20],v:function(t,e,r){return t},b:0,d:!1,g:2*Math.PI},c=function(t,e){var r=[];return r[0]=m.rotate(u.c[0],u.c[1],t,u.c[0]+e,u.c[1]),r[1]=m.rotate(u.c[0],u.c[1],t,u.c[0]+e+u.l[0],u.c[1]),r[2]=[r[1][0]>u.c[0]?r[1][0]- -u.l[1]:r[1][0]-u.l[1],r[1][1]],r[3]=r[1][0]>u.c[0]?"left":"right",r},f=function(t){var e,r=[],n=0,i=0;for(e in t)r.push({org:t[e],val:u.v(t[e],e,i)}),n+=r[i].val,i+=1;var o=u.b,a=0;for(i=0;i<r.length-1;i++)o=r[i].begin=o+a,r[i].p=r[i].val/n,a=r[i].deg=u.g*r[i].p*(u.d?-1:1),r[i].line=c(r[i].begin+.5*r[i].deg,"function"==typeof u.r?u.r(t[e],e,i):u.r),u.p(r[i],i);return r[i].begin=o+a,r[i].deg=u.g*(u.d?-1:1)+u.b-r[i].begin,r[i].p=r[i].val/n,r[i].line=c(r[i].begin+.5*r[i].deg,"function"==typeof u.r?u.r(t[e],e,i):u.r),u.p(r[i],i),f};return f.setValue=function(t){return u.v=t,f},f.drawer=function(t){return u.p=t,f},f.setD=function(t){return u.d=t,f},f.setBegin=function(t){return u.b=t,f},f.setRadius=function(t){return u.r=t,f},f.setDis=function(t,e){return u.l=[t,"number"==typeof e?e:t],f},f.setCenter=function(t,e){return u.c=[t,e],f},f.setDeg=function(t){return u.g=t,f},f};var e=t.clay,L=t.$$;return m.noConflict=function(t){return window.$$===m&&(window.$$=L),t&&window.clay===m&&(window.clay=e),m},m});